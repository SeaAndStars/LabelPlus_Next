# 文件名解析规则

解析目标：将本地文件归并到“卷/番外/普通话”，并为“普通话”确定唯一“话数（整数）”。

## 优先级与策略

1. 明确关键字优先：
   - 匹配“第 N 话/集/章”或“…… N 话/集/章”。
2. 范围处理：
   - 识别多个范围（N-M、N~M、N～M、N—M、N_ M、N 至 M、N 到 M 等），若存在多段，以所有范围的“右端最大值”作为话数。
   - 例如：“90～107.7z”→107；“113-115.7z”→115；“1.3-8.15.txt”→8。
3. 小数与分段：
   - 62.1 视为 62，避免 621 的误判。
4. 噪声过滤：
   - 日期(yyyy-mm-dd、yyyymmdd、yyyy.mm.dd)与分辨率(2160p/1080p/720p)被剔除。
5. 中文数字与多语支持：
   - 支持常见中文数字与中英混排。

## 手工修正

- 在“元数据确认”窗口中，“话数”列可编辑；确认后写回 EpisodeEntry。

## 目录与排序

- 卷："卷NN"；番外："番外NN" 或 "番外"；普通话："NN"。
- 排序键 RankKey 确保卷、番外、普通话顺序稳定、数值有序。
{% include back-home.md %}
