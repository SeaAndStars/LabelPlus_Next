<u:UrsaWindow
    x:Class="LabelPlus_Next.Views.Windows.ProjectMetaDataWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:u="https://irihi.tech/ursa"
    xmlns:vm="clr-namespace:LabelPlus_Next.ViewModels"
    xmlns:tdg="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls.TreeDataGrid"
    Title="确认上传话数"
    Width="1400"
    Height="800"
    x:DataType="vm:UploadViewModel">
    <Grid
        Margin="25"
        RowDefinitions="Auto * Auto Auto"
        RowSpacing="8">
        <StackPanel Orientation="Horizontal" Spacing="8">
            <TextBlock Text="项目：" />
            <TextBox Width="280" Text="{Binding PendingProjectName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        </StackPanel>

        <tdg:TreeDataGrid Grid.Row="1" Source="{Binding MetaTreeSource}" />

        <!--  Progress area  -->
        <StackPanel
            Grid.Row="2"
            Orientation="Vertical"
            Spacing="6">
            <TextBlock Text="{Binding Status}" />
            <ProgressBar
                Height="8"
                Maximum="{Binding UploadTotal}"
                Minimum="0"
                Value="{Binding UploadCompleted}" />
            <TextBlock
                FontSize="12"
                Foreground="#666"
                Text="{Binding CurrentUploadingPath}"
                TextTrimming="CharacterEllipsis" />
        </StackPanel>

        <StackPanel
            Grid.Row="3"
            HorizontalAlignment="Right"
            Orientation="Horizontal"
            Spacing="8">
            <Button Content="取消" Command="{Binding CancelMetaCommand}" />
            <Button Content="开始上传" IsDefault="True" Command="{Binding ConfirmMetaCommand}" />
        </StackPanel>
    </Grid>
</u:UrsaWindow>